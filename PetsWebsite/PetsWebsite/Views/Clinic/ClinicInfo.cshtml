<link rel="stylesheet" href="~/css/owl_carousel/owl.carousel.min.css" />
<link rel="stylesheet" href="~/css/owl_carousel/owl.theme.default.min.css" />
<link rel="stylesheet" href="~/lib/font-awesome/css/all.min.css" />



@section Scripts{
    <script defer src="/js/owl.carousel.js"></script>
    <script defer src="/js//owl.autoheight.js"></script>
    <script defer src="/js/owl.navigation.js"></script>
    <script defer src="/js/owl.autoplay.js"></script>
}

    <style>
        #info {
            justify-content: center;
        }

        #image {
            overflow: hidden
        }

        .image {
            transform: scale(1,1);
            transition: all .5s ease-in;
        }

            .image:hover {
                transform: scale(1.05) !important
            }

        #owlimage {
            width: 50px;
            font-size: 12px;
            border-radius: 5px;
            background-color: rgb(100 179 244 / 35%);
            display: flex;
        }
    </style>

    <div class="container" id="allinfo">
        <!-- 醫院資訊 -->
        <div class="container">
            <div class="container mt-3" v-for="item in Clinicinfo">
                <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="~/Home/Index">首頁</a></li>
                        <li class="breadcrumb-item active" aria-current="page"><a href="~/Clinic/Clinic">醫療資訊</a> >{{item.clinicName}}</li>
                    </ol>
                </nav>
                <div class="container">
                    <h1>{{item.clinicName}}</h1>
                </div>
            </div>
        </div>


        <div>
            <div class="row mb-2 g-0 position-relative" id="info" v-for="item in Clinicinfo">
                <div class="col-md-6">
                    <img :src="item.photoPath">
                </div>
                <div class="col-md-6" style="background:#f2cc8f;" v-for="item in Clinicinfo">
                    <ul class="mt-3 mb-4">
                        <li>聯絡電話 : {{item.phone}}</li>
                        <li>醫院地址 : {{item.city+item.region+item.address}}</li>
                        <li>服務項目 : {{item.service}}</li>
                        <li>有無急診 : {{item.emergency==false?"無急診":"有急診"}}</li>
                    </ul>
                    <div class="container">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3614.762718190244!2d121.51610596500642!3d25.04212538396851!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442a973c658b995%3A0xfde0dc33b0bfb0ff!2z6Ie65aSn6Yar6Zmi!5e0!3m2!1szh-TW!2stw!4v1658629428113!5m2!1szh-TW!2stw" width="450" height="200" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
                <div>
                </div>
            </div>

            <h1 class="mt-5 mb-5">服務項目</h1>
            <!-- 手風琴 -->
            <div class="accordion" id="accordionPanelsStayOpenExample" v-for="item in Clinicinfo">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                        <button class="accordion-button bg-primary " type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                            <h3>診療項目</h3>
                        </button>
                    </h2>
                    <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
                        <div class="accordion-body">
                            <h5>{{item.service}}</h5>
                            <p> {{item.describe}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 推薦商品 -->
        <h1 class="mt-5">推薦商品</h1>
        <div class="container">
            <div class="col-12 col-md-12">
                <div class="owl-carousel owl-theme" id="Prod">
                    <div class="item" v-for="item in ProductInfo">
                        <a href="~/Shop"><img :src="'/images/Product/'+item.photoPath"></a>
                        <h5>商品名稱 : {{item.productName}}</h5>
                        <span>商品售價 : {{item.unitPrice+"元"}}</span>
                    </div>
                </div>
            </div>
        </div>
        <!--附近寵物友善餐廳-->
        <h1 class="mt-5">附近寵物友善餐廳</h1>
        <div class="container">
            <div class="col-md-12">
                <div class="owl-carousel owl-theme" id="Rest">
                    <div class="item" v-for="item in NearRest">
                        <a href=""><img :src="item.photoPath" ></a>
                        <h5>餐廳名稱 : {{item.restaurants}}</h5>
                        <span>餐廳地址 : {{item.city+item.region+item.address}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>

        var app = new Vue({
            data: {
                Clinicinfo: [],
                ClinicId: "",
                ProductInfo: [],
                NearRest: []
            },
            mounted: function() {
                let self = this;
                var Urlstr = window.location.href;
                var index = Urlstr.lastIndexOf('/');
                var fullurl = Urlstr.substring(index + 1);
                self.ClinicId = fullurl;
                let url = `/api/ClinicAPI/Getinfo/${self.ClinicId}`
                fetch(url).then(res => {
                    return res.json();
                }).then(res => {
                    console.log("抓到info", res)
                    console.log(self)
                    self.Clinicinfo = res;
                });
                fetch(`/api/ClinicAPI/GetNearRest/${self.ClinicId}`).then(res => {
                    return res.json();
                }).then(res => {
                    console.log("抓到rest", res)
                    self.NearRest = res;
                    self.$nextTick(function() {
                        $('#Rest').owlCarousel({
                            nav: true,
                            margin: 10,
                            responsive: {
                                0: {
                                    items: 1 // 螢幕大小為 0~600 顯示 1 個項目
                                },
                                1000: {
                                    items: 4// 螢幕大小為 600~1000 顯示 3 個項目
                                },

                            }
                        })
                    }.bind(self))
                });
                fetch('/api/ClinicAPI/GetProductInfo').then(res => {
                    return res.json();
                }).then(res => {
                    self.ProductInfo = res;
                    self.$nextTick(function() {
                        $('#Prod').owlCarousel({
                            nav: true,
                            loop: true,
                            margin: 10,
                            autowidth: true,
                            autoheight: true,
                            autoplay: true,
                            autoplayTimeout: 3000,
                            responsive: {
                                0: {
                                    items: 1 // 螢幕大小為 0~600 顯示 1 個項目
                                },
                                600: {
                                    items: 3 // 螢幕大小為 600~1000 顯示 3 個項目
                                },
                                1000: {
                                    items: 4 // 螢幕大小為 1000 以上 顯示 5 個項目
                                }
                            }
                        })
                    }.bind(self))
                })
            },
        }).$mount('#allinfo')
    </script>

